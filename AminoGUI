package lab5;

import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.Timer;

public class AminoGUI extends JFrame
{
	private static final long serialVersionUID = 1975L;
	//sets empty variables for the counts and indices
	static Integer correctCount = 0;
	static Integer incorrectCount = 0;
	static Integer index = 0;
	//creates new textfields for displaying things
	private JTextField prompt = new JTextField();
	private JTextField input = new JTextField("");
	private JTextField Correct = new JTextField("Correct\n" + correctCount);
	private JTextField Incorrect = new JTextField("Incorrect\n" + incorrectCount);
	private JTextField time = new JTextField();
	//buttons for starting and canceling program
	private JButton start = new JButton("Start Quiz");
	//third button for aesthetic and symmetry
	private JButton space = new JButton("");
	private JButton cancel = new JButton("Cancel Quiz");
	
	Timer timer = new Timer(1000, new timeActionListener());
	
	private class timeActionListener implements ActionListener
	{
		//31 because it starts immediately after use action
		int timeRemaining = 31;
		
		public void actionPerformed(ActionEvent i)
		{
			timeRemaining--;
			time.setText(String.valueOf(timeRemaining));
			if(timeRemaining <= 0) 
			{
				timer.stop();
				input.setEnabled(false);
				prompt.setEnabled(false);
			}
		}
	}
	
	public void aminoGen()
	{
		Random random = new Random();
		String acid = "";

		String[] FULL_NAMES = 
		{"alanine","arginine", "asparagine", 
		"aspartic acid", "cysteine",
		"glutamine",  "glutamic acid",
		"glycine" ,"histidine","isoleucine",
		"leucine",  "lysine", "methionine", 
		"phenylalanine", "proline", 
		"serine","threonine","tryptophan", 
		"tyrosine", "valine"};
			
		index = random.nextInt(19);
		acid = FULL_NAMES[index];
		updateTextField(acid);
	}
	
	private class StartListener implements ActionListener
	{
		public void actionPerformed(ActionEvent arg0)
		{
			aminoGen();
			timer.start();
		}
	}	

	private class CancelListener implements ActionListener
	{
		public void actionPerformed(ActionEvent e)
		{
			System.exit(0);
		}
	}
	
	private class inputListener implements ActionListener
	{
		public void actionPerformed(ActionEvent e)
		{
			String answer = input.getText();
			String[] SHORT_NAMES = 
				{ "A","R", "N", "D", "C", "Q", "E",
				"G",  "H", "I", "L", "K", "M", "F", 
				"P", "S", "T", "W", "Y", "V" };
			//prints out correct index, so index is accessible here
			System.out.println(index);
			if (answer.toUpperCase().equals(SHORT_NAMES[index])) 
				{
//					correctCount ++;
					updateCorrectField(correctCount++);
				}
			else
				{
//					incorrectCount ++;
					updateIncorrectField(incorrectCount++);
				}
			input.setText("");
			aminoGen();
		}
	}
	
	private void updateCorrectField(Integer x)
	{
		Correct.setText("Correct:\n" + String.valueOf(x));
		validate();
	}
	
	private void updateIncorrectField(Integer x)
	{
		Incorrect.setText("Incorrect:\n" + String.valueOf(x));
		validate();
	}
	
	
	private void updateTextField(String text)
	{
		prompt.setText(text);
		validate();
	}
	
	private JPanel startCancel()
	{
		JPanel panel = new JPanel();
		panel.setLayout(new GridLayout(0,3));
		panel.add(start);
		panel.add(space);
		panel.add(cancel);
		
		start.addActionListener(new StartListener());
		
		cancel.addActionListener
		(
			new ActionListener()
			{
				public void actionPerformed(ActionEvent e)
				{
					String cancelText = "hit cancel";
					updateTextField(cancelText);
				}
			}
		);
		return panel;
	}
	
	private JPanel promptTime()
	{
		JPanel pt = new JPanel();
		pt.setLayout(new GridLayout(2,0));
		pt.add(time);
		pt.add(prompt);
		return pt;
	}
	
	public AminoGUI()
	{
		super("Amino Acid Quiz");
		setLocationRelativeTo(null);
		setSize(400,400);
		setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		getContentPane().setLayout(new BorderLayout());
		getContentPane().add(startCancel(), BorderLayout.SOUTH);
		start.addActionListener(new StartListener());
		cancel.addActionListener(new CancelListener());
		time.addActionListener(new timeActionListener());
		getContentPane().add(promptTime(), BorderLayout.NORTH);
		getContentPane().add(input, BorderLayout.CENTER);
		getContentPane().add(Correct, BorderLayout.WEST);
		getContentPane().add(Incorrect, BorderLayout.EAST);
		Correct.setEditable(false);
		prompt.setEditable(false);
		time.setEditable(false);
		Incorrect.setEditable(false);
		input.addActionListener(new inputListener());
		setVisible(true);
	}	
	public static void main(String[] args)
	{
		new AminoGUI();
	}
}
